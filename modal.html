<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>CalendarCapture</title>
  <style>
    body {
      font-family: 'Google Sans', 'Roboto', 'Segoe UI', system-ui, -apple-system, sans-serif;
      background-color: #f8f9fa;
      margin: 0;
      padding: 16px;
      color: #3c4043;
      min-width: 680px;
      overflow-x: hidden;
    }

    .status-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-bottom: 12px;
      border-bottom: 1px solid #dadce0;
      margin-bottom: 20px;
    }

    .status-text {
      font-size: 16px;
      font-weight: 500;
    }

    .methods-text {
      font-size: 12px;
      color: #5f6368;
      background-color: #e8eaed;
      padding: 4px 8px;
      border-radius: 16px;
    }

    .image-preview {
      border: 1px solid #dadce0;
      border-radius: 8px;
      max-width: 100%;
      height: 180px;
      background-color: #ffffff;
      resize: both;
      overflow: hidden;
      margin-bottom: 16px;
      display: flex;
      justify-content: center;
      box-shadow: 0 1px 2px 0 rgba(60,64,67,0.3), 0 1px 3px 1px rgba(60,64,67,0.15);
    }

    .image-preview img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    .form-section {
      background-color: #ffffff;
      padding: 16px;
      border-radius: 8px;
      border: 1px solid #dadce0;
      margin-bottom: 20px;
    }

    .field {
      display: flex;
      flex-direction: column;
      gap: 4px;
      margin-bottom: 12px;
    }

    .field input:not([type="date"]):not([type="time"]), .field textarea {
      background-color: #f1f3f4;
      border: 1px solid #dadce0;
      border-radius: 8px;
      font-size: 14px;
      font-family: 'Roboto', sans-serif;
      padding: 10px 12px;
      box-sizing: border-box;
      transition: background-color 150ms, border-color 150ms, box-shadow 150ms;
    }

    .field input:focus, .field textarea:focus {
      outline: none;
      background-color: #fff;
      border-color: #1a73e8;
      box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
    }

    .field input[type="date"], .field input[type="time"] {
      border: 1px solid #dadce0;
      border-radius: 8px;
      font-size: 14px;
      font-family: 'Roboto', sans-serif;
      padding: 9px 12px;
      box-sizing: border-box;
      transition: border-color 150ms, box-shadow 150ms;
    }

    .datetime-row {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr 1fr auto;
      gap: 8px;
      align-items: center;
    }

    .datetime-row .field {
      margin: 0;
    }

    .buttons {
      display: flex;
      gap: 8px;
      justify-content: flex-start;
      margin-bottom: 20px;
    }

    .btn {
      font-family: 'Google Sans', 'Roboto', sans-serif;
      font-weight: 500;
      padding: 10px 24px;
      border: none;
      border-radius: 20px;
      background-color: #fff;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s ease;
      box-shadow: 0 1px 2px 0 rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    }

    .btn:hover:not(:disabled) {
      background-color: #f8f9fa;
      box-shadow: 0 1px 3px 0 rgba(60, 64, 67, 0.3), 0 4px 8px 3px rgba(60, 64, 67, 0.15);
      transform: translateY(-1px);
    }

    .btn:active:not(:disabled) {
      transform: translateY(0);
    }

    .btn.primary {
      background-color: #1a73e8;
      color: white;
    }

    .btn.primary:hover:not(:disabled) {
      background-color: #1765cc;
      box-shadow: 0 1px 3px 0 rgba(60, 64, 67, 0.3), 0 4px 8px 3px rgba(60, 64, 67, 0.15);
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .btn-pulse {
      animation: pulse 1.5s ease-in-out infinite;
    }

    .api-status {
      color: #d93025;
      font-size: 13px;
      font-weight: 500;
      margin-left: 12px;
    }

    .ocr-section {
      margin: 16px 0 0 0;
    }

    .ocr-section textarea {
      width: 100%;
      min-height: 120px;
      resize: vertical;
      font-family: 'Roboto Mono', 'SF Mono', Monaco, monospace;
      font-size: 13px;
      box-sizing: border-box;
      background-color: #f1f3f4;
      border: 1px solid #dadce0;
      border-radius: 8px;
      padding: 10px 12px;
    }

    .ocr-section textarea:focus {
      background-color: #fff;
      border-color: #1a73e8;
      box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
    }

    /* Wider scrollbars */
    textarea::-webkit-scrollbar {
      width: 12px;
    }

    textarea::-webkit-scrollbar-track {
      background: #f1f3f4;
      border-radius: 8px;
    }

    textarea::-webkit-scrollbar-thumb {
      background: #dadce0;
      border-radius: 8px;
    }

    textarea::-webkit-scrollbar-thumb:hover {
      background: #bdc1c6;
    }

    .log-section {
      margin-top: 16px;
      display: none; /* Keep log hidden by default */
    }

    .log-section textarea {
      width: 100%;
      min-height: 150px;
      background: #0b1220;
      color: #cde3ff;
      font-family: 'SF Mono', Monaco, monospace;
      font-size: 11px;
      resize: vertical;
      box-sizing: border-box;
    }

    .log-section textarea:focus {
      background-color: #0b1220; /* Keep dark background on focus */
      border-color: #5f6368;
    }

    #modal-error {
      color: #d93025;
      font-size: 13px;
      margin-top: 12px;
    }

    .ocr-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 4px;
    }

    .ocr-utils {
      visibility: hidden; /* Hidden by default */
    }

    .ocr-utils .btn-util {
      background: none;
      border: none;
      cursor: pointer;
      color: #5f6368;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <div class="status-bar">
    <div class="status-text" id="status">Ready - review and click Add to Calendar</div>
    <div class="methods-text" id="methods"></div>
  </div>

  <div class="image-preview">
    <img id="captured-image" alt="Captured area">
  </div>

  <div class="buttons">
    <button id="add-to-calendar" class="btn">Add to Calendar</button>
    <button id="show-log" class="btn">Show Log</button>
    <button id="config" class="btn">Options</button>
    <button id="cancel" class="btn">Exit</button>
    <span id="api-status" class="api-status"></span>
  </div>

  <div class="form-section">
    <div class="field" style="margin-bottom: 16px;">
      <input id="event-title" type="text" placeholder="Event title">
    </div>
    
    <div class="datetime-row">
      <div class="field">
        <input id="start-date" type="date">
      </div>
      <div class="field">
        <input id="start-time" type="time">
      </div>
      <div class="field">
        <input id="end-date" type="date">
      </div>
      <div class="field">
        <input id="end-time" type="time">
      </div>
      <div class="field" style="flex-direction: row; align-items: center; gap: 4px;">
        <input id="all-day" type="checkbox">
        <label for="all-day">All-day</label>
      </div>
    </div>

    <div class="field" style="margin-top: 16px;">
      <input id="location" type="text" placeholder="Location">
    </div>
  </div>

  <div class="ocr-section">
    <div class="field">
      <textarea id="ocr-text" placeholder="Extracted text from image will appear here..."></textarea>
    </div>
  </div>

  <div class="log-section" id="log-section">
    <div class="field">
      <div class="ocr-header">
        <label for="log-text" style="font-size: 12px; color: #6b7280;">Debug Log</label>
        <div id="log-utils" class="ocr-utils">
          <button id="log-copy-btn" class="btn-util">Copy</button>
          <button id="log-clear-btn" class="btn-util">Clear</button>
        </div>
      </div>
      <textarea id="log-text" readonly></textarea>
    </div>
  </div>

  <!-- Error message display -->
  <div id="modal-error"></div>

  <script src="modal.js"></script>
</body>
</html>